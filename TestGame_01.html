<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
        #divFrame{
        background-color: rgb(91, 88, 94);
        display: grid;
        justify-items: center;
        }

        #canvasGame {
            margin: 1rem;
            border: 0.2rem solid black;
        }

        #divScore, #buttonStart {
            font-size: 2rem;

        }

        #buttonStart {
            cursor: pointer;
            background-color: antiquewhite;

        }

    </style>
</head>
<body>

    <div id = "divFrame">
        <canvas id = "canvasGame" height="500" width="500"></canvas>
        <div id = "divScore">0</div>
        <button id = "buttonStart">Start / Reset</button>
    </div>

    <!-- <script src="TestGame_01.js"></script> -->

    <script>

        const canvasGame = document.querySelector("#canvasGame");
        const divScore = document.querySelector("#divScore");
        const buttonGame = document.querySelector("#buttonStart");
        const ctx = canvasGame.getContext('2d');

        const unitSize = 25;

        let gameLoopId;
        let running = false;
        let snake = [ // Each element of the snake array = Object
            {x:unitSize*4, y:0}, // Head
            {x:unitSize*3, y:0},
            {x:unitSize*2, y:0},
            {x:unitSize*1, y:0},
            {x:0, y:0}
        ];

        let xVelocity = 25;
        let yVelocity = 0;

        let gameWidth = canvasGame.width;
        let gameHeight = canvasGame.height;

        buttonGame.addEventListener("click", gameStart);

        // console.log(snake[0]);
        const snakeColor = "lightgreen";
        const appleColor = "red";
        const borderColor = "black";
        const backgroundColour = "lightgrey";

        function resetGame(){
            xVelocity = unitSize;
            yVelocity = 0;

            running = false;
            clearTimeout(gameLoopId); // clear the timeout, prevents it from repeatedly running when game starts
            gameStart();
        }

        function moveSnake(){
            for(let i = 0; i < snake.length; i++){
                snake[i].x += unitSize;
                snake[i].y += 0;
            }
        }

        function gameStart(){
            gameRunning = true;
            nextTick();
        }

        function nextTick(){

            if (running){
                gameLoopId = setTimeout(()=>{
                    clearBoard(); // clear frame before drawing
                    moveSnake();
                    drawSnake();
                    checkGameOver();
                    nextTick(); // recursion
                },75);
            }
        }

        function drawSnake(){

            ctx.fillStyle = "snakeColor";
            snake.forEach(snakeObjectElementParameter => {
                ctx.fillRect(snakeObjectElementParameter.x, snakeObjectElementParameter.y, unitSize, unitSize);
                ctx.strokeRect(snakeObjectElementParameter.x, snakeObjectElementParameter.y, unitSize, unitSize);
            });
        }

        function drawFood(){

        }

        function createFood(){

        }

        function checkGameOver() {

        }

        function clearBoard() {

            ctx.fillStyle = "backgroundColour";
            ctx.fillRect(0, 0, gameWidth, gameHeight);

        }

    </script>
    
</body>
</html>